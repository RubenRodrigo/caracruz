{% extends 'tienda/main.html' %}
{% load static %}
{% block content %}

<main id="main">
    <section class="hero-tienda">
        <div class="row ">
            <div class="col-md-6 p-0 img-dama">
                <a href="{% url 'tienda_catalogo' 'Damas' %}" class="p-2 text-center">Damas</a>
            </div>
            <div class="col-md-6 p-0 img-casa">
                <a href="{% url 'tienda_catalogo' 'Linea de Casa' %}" class="p-2 text-center">Linea de Casa</a>
            </div>
        </div>
    </section>
    <section class="tienda" id="tienda">
        <div class="container">
            <div class="row">
                <div class="col-md-3 filtros">
                    <h3>CATALOGOS</h3>
                    <div class="filtros-tipo">
                            <h4 class="text-dark catalogo">Categorias
                            <img class ="catalogo-img" src="{% static 'assets/img/arrow-down.png' %}" alt="">
                                 </h4>
                        <div class="options">
                            {% for catalogo in catalogos %}                                
                                <h5>
                                    <a href="{% url 'tienda_catalogo' catalogo.nombre %}">{{catalogo.nombre}}</a>
                                </h5>
                                {% for categoria in catalogo.categorias %}
                                    <h6 class="pl-4">
                                        <a href="{% url 'tienda_categoria' catalogo.nombre categoria.nombre %}#tienda">
                                            {{categoria.nombre}}
                                        </a>
                                    </h6>
                                {% endfor %}
                            {% endfor %}
                        </div>
                    </div>
                </div>
                <div class="col-md-9">
                    <div class="productos">
                        {% for producto in page_obj %}                   
                        <div class="producto">
                            <a class="ver-producto-page" href="{% url 'producto' producto.id%}">
                                <div class="producto-img">                                    
                                    <img 
                                        class="producto-imagen" 
                                        src="{{producto.imagenURL}}" 
                                        alt=""
                                        data-productofirst="{{producto.imagenURL}}"
                                        data-productosecond="{{producto.imagenes.0.imagenURL}}">                                    
                                    <button class="ver-producto"><span class="ver-producto-span">Ver producto</span></button>                                    
                                </div>
                            </a>
                                <!-- The Modal -->
                            <div id="myModal" class="modal-box">
                                <!-- Modal content -->
                                <div class="modal-contenido">
                                    <span class="close">&times;</span>
                                    <section class="producto-page">
                                        <div class="container">
                                            <div class="row producto-container">
                                                <div class="col-md-6 producto-page-imagenes">
                                                    <div class="row">
                                                        <div id="carouselExampleIndicators{{ producto.id }}" class="carousel slide" data-ride="carousel" data-interval="false">
                                                            <ol class="carousel-indicators">
                                                                <li data-target="#carouselExampleIndicators{{ producto.id }}" data-slide-to="0" class="active"></li>
                                                                {% for imagen in producto.imagenes %}
                                                                <li data-target="#carouselExampleIndicators{{ producto.id }}" data-slide-to=" {{ forloop.counter }}"></li>
                                                                {% endfor %}
                                                                <li data-target="#carouselExampleIndicators{{ producto.id }}" data-slide-to=" {{ producto.imagenes.count|add:1 }}"></li>
                                                              </ol>
                                
                                                            <div class="carousel-inner">
                                                              <div class="carousel-item active">
                                                                <img src="{{producto.imagenURL}}" class="d-block w-100" alt="..." id="image-zoom">
                                                              </div>
                                                              {% for imagen in producto.imagenes %}
                                                              <div class="carousel-item">
                                                                <img src="{{imagen.imagenURL}}" class="d-block w-100" alt="..." id="image-zoom">         
                                                              </div>                                                            
                                                              {% endfor %}
                                                              <div class="carousel-item">
                                                                <video class="d-block w-100 carousel-item-video" controls>
                                                                    <source src="{% static 'assets/video/prueba_video.mp4' %}" type="video/mp4">
                                                                    Your browser does not support HTML video.
                                                                </video>
                                                              </div>
                                                            </div>
                                
                                                            <div class="image-zoom-result image-zoom-result-inactive" id="image-zoom-result">
                                
                                                            </div>
                                                            <a class="carousel-control-prev" href="#carouselExampleIndicators{{ producto.id }}" role="button" data-slide="prev">
                                                              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                                              <span class="sr-only">Previous</span>
                                                            </a>
                                                            <a class="carousel-control-next" href="#carouselExampleIndicators{{ producto.id }}" role="button" data-slide="next">
                                                              <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                                              <span class="sr-only">Next</span>
                                                            </a>
                                                        </div>                                         
                                                    </div>                   
                                                </div>
                                                <div class="col-md-6 producto-page-info">
                                                    <h3 class="produto-titulo">{{producto.nombre}}</h3>
                                                    <h5 class="producto-precio">{{producto.precio}}</h5>
                                                    <p class="producto-descripcion">{{producto.caracteristicas}}</p>
                                                    <h6>Colores</h6>
                                                    <div class="producto-colores">
                                                        {% for color in producto.colores%}
                                                        <div class="color">
                                                            <span class="color-gray" style="background-color:#{{color.codigo}}"></span>
                                                        </div>
                                                        {% endfor %}                        
                                                    </div>
                                                    <h6>Tallas</h6>
                                                    <div class="producto-tallas">
                                                        <button>XXS</button>
                                                        <button>XSML</button>
                                                        <button>SML</button>
                                                        <button>MED</button>
                                                        <button>LRG</button>
                                                        <button>XL</button>
                                                        <button>36</button>
                                                    </div>
                                                    <h6>Cantidad</h6>
                                                    <div class="producto-cantidad">
                                                        <select name="" id="">
                                                            <option value="1">1</option>
                                                            <option value="2">2</option>
                                                            <option value="3">3</option>
                                                            <option value="4">4</option>
                                                            <option value="5">5</option>
                                                            <option value="6">6</option>
                                                            <option value="7">7</option>
                                                            <option value="8">8</option>
                                                            <option value="9">9</option>
                                                            <option value="10">10</option>
                                                        </select>
                                                    </div>
                                                    <button class="add-cart"><span>Añadir al carrito</span></button>
                                                </div>
                                            </div>
                                        </div>
                                    </section>
                                    <span class="close-end"></span>
                                </div>
                            </div>

                            <div class="producto-info">
                                <a href="{% url 'producto' producto.id%}">
                                    <h5 id="producto-info-titulo">{{producto.nombre}}</h5>
                                </a>
                                <p id="producto-info-precio">S/ {{producto.precio}}</p>
                                <p id="producto-info-descripcion">{{producto.caracteristicas}}</p>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                    <div class="pagination">
                        <span class="step-links">
                            {% if page_obj.has_previous %}
                                <a href="?page=1">&laquo; first</a>
                                <a href="?page={{ page_obj.previous_page_number }}">previous</a>
                            {% endif %}

                            <span class="current">
                                Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
                            </span>

                            {% if page_obj.has_next %}
                                <a href="?page={{ page_obj.next_page_number }}">next</a>
                                <a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
                            {% endif %}
                        </span>                        
                    </div>
                </div>
            </div>
        </div>
    </section>
</main>
<script src="{% static 'assets/js/tienda.js' %}"></script>
{% endblock content %}